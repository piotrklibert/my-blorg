<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Piotr Klibert" />
    <meta name="description" content="Exciting new programming Languages and Polyglot programming; also Emacs" />

    <link rel="preload" as="font" href="/statics/fonts/Roboto-Regular.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" as="font" href="/statics/fonts/Roboto-Italic.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" as="font" href="/statics/fonts/Roboto-Black.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" as="font" href="/statics/fonts/Roboto-Black.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" href="/output/base.min.css?cache_busting_cookie=4333" as="style" />

    <link rel="icon" type="image/x-icon" href="/statics/images/favicon.ico" />
    <link href="/statics/base.min.css?cache_busting_cookie=4287" rel="stylesheet" />
    <link href="/statics/styles/my-styles.css?cache_busting_cookie=4202" rel="stylesheet" />
    <link href="/statics/highlight-code.min.css?cache_busting_cookie=4398" rel="stylesheet" />
    <style type="text/css">.example { color: white; }</style>
    <title>Advent of Code 2023 - Day 4 -- Piotr Klibert's blog</title>
  </head>
  <body>

    <header id="blog-header">
      <div id="blog-title">
        <h1>The Right Lang for the Job</h1>
        <div><p>Exploring the abbyss of non-mainstream programming languages</p></div>
      </div>

      <div id="top-menu-container">
        <nav>
          <a href="/">Blog</a>
          <!-- <a href="/articles/archive.html">Archive</a> -->
          <!-- <a href="/articles/programming_langs.html">Languages</a> -->
          <!-- <a href="/articles/about.html">About</a> -->
          <!-- <a href="/articles/contact.html">Contact</a> -->
          <!-- <div id="blog-nav-rss"> -->
          <!-- <a nofolow="1" href="/statics/feed.xml"> -->
          <!-- <img src="/statics/icons/rss0.png" alt="RSS icon" /> -->
          <!-- </a> -->
          <!-- </div> -->
        </nav>
      </div>
    </header>

    <main id="blog-main">
      <div class="blog-main">
        
  <article>
    <header>
      <h1 class="entry-title">
        <a class="title-link" id="advent-of-code-2023-day-4" href="/posts/advent-of-code-2023-day-4.html" title="Read on separate page">
          Advent of Code 2023 - Day 4
        </a>
        <a href="#advent-of-code-2023-day-4" class="robaczek" title="Link to this place on current page">Â¶</a>
      </h1>
      
        <h3 class="subtitle">I&#39;ll just stop adding &#34;Part 1&#34; to the title...</h3>
      
      <p class="meta">
        Created: <time>&lt;2023-12-04 14:11:41&gt;</time>
        
      </p>
    </header>

    <p>
This <a href="https://adventofcode.com/2023/day/4">puzzle</a> was way too easy, compared to yesterday's. Again, I won't do part 2
due to lack of time - that's probably going to be the same for the following
posts, too - but part 1 was trivial.
</p>

<p>
In this puzzle, we're asked to find the size of the set intersection of two
lists of numbers. After that, we need to compute the following:
</p>

<blockquote>
<p>
The first match makes the card worth <b>one point</b> and each match after the first
doubles the point value of that card.
</p>
</blockquote>

<p>
According to the explanation, the result for the example should be <b><b>13</b></b>.
Here's the solution:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="linenr"> 1: </span><span style="color: #5f9ea0;">(</span><span style="color: #8ac6f2; font-weight: bold;">defconst</span> <span style="color: #cae682;">example-input</span>
<span class="linenr"> 2: </span>  <span style="color: #95e454;">"Card 1: 41 48 83 86 17 | 83 86  6 31 17  9 48 53</span>
<span class="linenr"> 3: </span><span style="color: #95e454;">Card 2: 13 32 20 16 61 | 61 30 68 82 17 32 24 19</span>
<span class="linenr"> 4: </span><span style="color: #95e454;">Card 3:  1 21 53 59 44 | 69 82 63 72 16 21 14  1</span>
<span class="linenr"> 5: </span><span style="color: #95e454;">Card 4: 41 92 73 84 69 | 59 84 76 51 58  5 54 83</span>
<span class="linenr"> 6: </span><span style="color: #95e454;">Card 5: 87 83 26 28 32 | 88 30 70 12 93 22 82 36</span>
<span class="linenr"> 7: </span><span style="color: #95e454;">Card 6: 31 18 13 56 72 | 74 77 10 23 35 67 36 11"</span><span style="color: #5f9ea0;">)</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span style="color: #5f9ea0;">(</span><span style="color: #8ac6f2; font-weight: bold;">cl-defun</span> <span style="color: #cae682;">parse-input</span> <span style="color: #ff66ff;">(</span><span style="color: #cae682;">data</span><span style="color: #ff66ff;">)</span>
<span class="linenr">10: </span>  <span style="color: #ff66ff;">(</span><span style="color: #8ac6f2; font-weight: bold;">cl-loop</span> <span style="color: #e5786d;">for</span> <span style="color: #cae682;">card</span> <span style="color: #e5786d;">in</span> <span style="color: #00eff0;">(</span>split-string data <span style="color: #95e454;">"\n"</span><span style="color: #00eff0;">)</span>
<span class="linenr">11: </span>           <span style="color: #e5786d;">for</span> <span style="color: #00eff0;">(</span>name scores<span style="color: #00eff0;">)</span> <span style="color: #e5786d;">=</span> <span style="color: #00eff0;">(</span>split-string card <span style="color: #95e454;">": +"</span><span style="color: #00eff0;">)</span>
<span class="linenr">12: </span>           <span style="color: #e5786d;">for</span> <span style="color: #cae682;">nums</span> <span style="color: #e5786d;">=</span> <span style="color: #00eff0;">(</span>split-string scores <span style="color: #95e454;">" +"</span><span style="color: #00eff0;">)</span>
<span class="linenr">13: </span>           <span style="color: #e5786d;">collect</span> <span style="color: #00eff0;">(</span>-map #'<span style="color: #cae682;">read</span> nums<span style="color: #00eff0;">)</span><span style="color: #ff66ff;">)</span><span style="color: #5f9ea0;">)</span>
<span class="linenr">14: </span>
<span class="linenr">15: </span><span style="color: #5f9ea0;">(</span><span style="color: #8ac6f2; font-weight: bold;">let</span> <span style="color: #ff66ff;">(</span><span style="color: #00eff0;">(</span><span style="color: #cae682;">scores</span> <span style="color: #ff6b55;">(</span><span style="color: #8ac6f2; font-weight: bold;">--map</span> <span style="color: #efef00;">(</span>-partition-by #'<span style="color: #cae682;">numberp</span> it<span style="color: #efef00;">)</span> <span style="color: #efef00;">(</span>parse-input example-input<span style="color: #efef00;">)</span><span style="color: #ff6b55;">)</span><span style="color: #00eff0;">)</span><span style="color: #ff66ff;">)</span>
<span class="linenr">16: </span>  <span style="color: #ff66ff;">(</span><span style="color: #8ac6f2; font-weight: bold;">cl-loop</span> <span style="color: #e5786d;">for</span> <span style="color: #00eff0;">(</span>winning _ haves<span style="color: #00eff0;">)</span> <span style="color: #e5786d;">in</span> scores
<span class="linenr">17: </span>           <span style="color: #e5786d;">for</span> <span style="color: #cae682;">win-expt</span> <span style="color: #e5786d;">=</span> <span style="color: #00eff0;">(</span>1- <span style="color: #ff6b55;">(</span>length <span style="color: #efef00;">(</span>-intersection winning haves<span style="color: #efef00;">)</span><span style="color: #ff6b55;">)</span><span style="color: #00eff0;">)</span>
<span class="linenr">18: </span>           <span style="color: #e5786d;">when</span> <span style="color: #00eff0;">(</span>&gt;= win-expt 0<span style="color: #00eff0;">)</span>        <span style="color: #99968b;">; </span><span style="color: #99968b;">b/c `</span><span style="color: #e5786d;">expt</span><span style="color: #99968b;">' works with negative numbers</span>
<span class="linenr">19: </span>           <span style="color: #e5786d;">sum</span> <span style="color: #00eff0;">(</span>expt 2 win-expt<span style="color: #00eff0;">)</span><span style="color: #ff66ff;">)</span><span style="color: #5f9ea0;">)</span>
</pre>
</div>

<pre class="example">
13
</pre>


<p>
It works! ðŸ™‚
</p>

<p>
Interesting points:
</p>

<ol class="org-ol">
<li>We use <code>read</code> instead of <code>string-to-number</code> on line 13 because the separator
(<code>|</code>) is a valid symbol, so we don't need to special-case it.</li>
<li>The multiplication described in the task can be written as exponentiation
with base 2, with exponent being one less than the number of winning numbers
we have. However, <code>expt</code> works with negative exponents properly (instead of
throwing an error or returning 0), so we need to filter out cases where none
of the numbers we have are "winning". Otherwise, we'd get <code>(expt 2 -1) ==
   0.5</code>, which would be accumulated and we'd get the wrong result.</li>
<li>As previously, <code>split-string</code> is the workhorse for parsing, and <code>cl-loop</code>
along with a few functions from <code>dash</code> (esp. <code>-partition-by</code> and obviously
<code>-intersection</code>) came in handy.</li>
</ol>

<p>
Part 2 is a little more interesting, but unfortunately, I have to go to work, so
maybe next time&#x2026;
</p>

  </article>

      </div>

      <div class="blog-sidebar">

        <div class="sidebar-module sidebar-module-inset">
          You can now subscribe to an
          <a nofolow="1" href="/statics/feed.xml">RSS feed</a>
          <a nofolow="1" href="/statics/feed.xml"><img src="/statics/feed-icon-14x14.png" style="vertical-align: baseline;"/></a>.
        </div>

        <!-- <div class="sidebar-module sidebar-module-inset" id="posts-module"> -->
        <!-- <h4 style="">Latest posts</h4> -->
        <!-- <ol class="list-unstyled posts-links"></ol> -->
        <!-- </div> -->
        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2023</h4>
          <blockquote>
            One of the most surprising things I've witnessed in my lifetime is
            the rebirth of the concept of heresy.
            <footer>â€” <cite><a href="http://paulgraham.com/heresy.html">Paul Graham</a></cite></footer>
          </blockquote>
        </div>

        <div class="sidebar-module sidebar-module-inset">
          <h4>About me</h4>
          <p>
            I'm a programmer. I like learning programming languages. I've been
            doing it for more than a decade.
          </p>
          <p>
            Here's roughly <a href="/articles/about.html#history">what I learned</a>
            to date.
          </p>
          <p>
            <a href="/articles/contact.html">Contact me</a>
          </p>
        </div>

        <div class="sidebar-module sidebar-module-inset" id="links-module">
          <h4>Links</h4>

          <ol class="links-list">
            <li><a href="https://www.youtube.com/watch?v=m09RWtt5nd8">Video of my talk on FP</a></li>
            <li><a href="/warsawjs-talk/">Slides</a> and <a href="/warsawjs-talk/code.html">Examples</a> for the talk</li>
          </ol>

          <ol class="links-list">
            <li><a href="http://hashrocket.com/blog/posts/taking-advantage-of-the-polyglot-lifestyle">Polyglot Lifestyle</a></li>
            <li><a href="https://hyperpolyglot.org/">HyperPolyglot - language comparisons</a></li>
            <li><a href="https://programming-idioms.org/">Programming Idioms</a></li>
            <li><a href="https://github.com/kanaka/mal/blob/master/process/guide.md">Make a Lisp</a></li>
            <li><a href="http://rosettacode.org/wiki/Rosetta_Code">Rosetta Code</a></li>
            <li><a href="http://pleac.sourceforge.net/">PLEAC - Programming Language Examples Alike Cookbook</a></li>
            <li><a href="http://learnxinyminutes.com/">Learn X in Y Minutes</a></li>
            <li><a href="http://hyperpolyglot.org/">Hyperpolyglot</a></li>
            <li><a href="http://rigaux.org/language-study/syntax-across-languages/">PL syntaxes comparison</a></li>
            <li><a href="https://github.com/kanaka/mal">Make a Lisp</a></li>
            <li><a href="https://modern-sql.com/use-case/literate-sql">Literate SQL</a></li>
            <li><a href="http://en.literateprograms.org/LiteratePrograms:Welcome">Literate Programs</a></li>
            <li><a href="http://radar.oreilly.com/2013/11/polyglot-programming-what-is-it-and-why-should-you-be-using-it.html">Why Polyglot?</a></li>
          </ol>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2022</h4>
          <blockquote>
            It's amazing what you can talk yourself into liking
            <footer>â€” <cite>Steve Yegge</cite></footer>
          </blockquote>
        </div>


        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2020</h4>
          <blockquote>
            What can change the nature of a man?
            <footer>â€” <cite>Ravel Puzzlewell</cite></footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2017</h4>
          <blockquote>
            One foot in the grave, the other in Hell.
            <footer>â€” <cite>The Nameless One</cite></footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Catch phrase of the Year 2016</h4>
          <blockquote>
            It isn't ideal that...
            <footer>â€” <cite>many different people</cite></footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2015</h4>
          <blockquote>
            You can't type-check being hit by a lightning, can you?
            <footer>
              â€” <cite>Joe Armstrong, creator of <a href="https://en.wikipedia.org/wiki/Erlang_(programming_language)">Erlang</a></cite>
            </footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2014</h4>
          <blockquote>
            But you <i>do know</i> that non-programmers are
            people, too?
            <footer>â€” <cite>MichaÅ‚ KÅ‚ujszo</cite></footer>
          </blockquote>
        </div>
      </div> <!-- /.blog-sidebar -->
    </main>
    <footer class="blog-footer">
      <p><a href="#">Back to top</a> / <a href="">More posts</a> </p>
    </footer>

    <script src="/statics/bundle.js?cache_busting_cookie=4239"></script>
  </body>
</html>
