<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Piotr Klibert" />
    <meta name="description" content="Exciting new programming Languages and Polyglot programming; also Emacs" />

    <link rel="preload" as="font" href="/statics/fonts/Roboto-Regular.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" as="font" href="/statics/fonts/Roboto-Italic.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" as="font" href="/statics/fonts/Roboto-Black.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" as="font" href="/statics/fonts/Roboto-Black.ttf" type="font/ttf" crossorigin="anonymous" />
    <link rel="preload" href="/output/base.min.css?cache_busting_cookie=4333" as="style" />

    <link rel="icon" type="image/x-icon" href="/statics/images/favicon.ico" />
    <link href="/statics/base.min.css?cache_busting_cookie=4287" rel="stylesheet" />
    <link href="/statics/styles/my-styles.css?cache_busting_cookie=4202" rel="stylesheet" />
    <link href="/statics/highlight-code.min.css?cache_busting_cookie=4398" rel="stylesheet" />
    <style type="text/css">.example { color: white; }</style>
    <title>Under Construction! -- Piotr Klibert's blog</title>
  </head>
  <body>

    <header id="blog-header">
      <div id="blog-title">
        <h1>The Right Lang for the Job</h1>
        <div><p>Exploring the abbyss of non-mainstream programming languages</p></div>
      </div>

      <div id="top-menu-container">
        <nav>
          <a href="/">Blog</a>
          <!-- <a href="/articles/archive.html">Archive</a> -->
          <!-- <a href="/articles/programming_langs.html">Languages</a> -->
          <!-- <a href="/articles/about.html">About</a> -->
          <!-- <a href="/articles/contact.html">Contact</a> -->
          <!-- <div id="blog-nav-rss"> -->
          <!-- <a nofolow="1" href="/statics/feed.xml"> -->
          <!-- <img src="/statics/icons/rss0.png" alt="RSS icon" /> -->
          <!-- </a> -->
          <!-- </div> -->
        </nav>
      </div>
    </header>

    <main id="blog-main">
      <div class="blog-main">
        
  <article>
    <header>
      <h1 class="entry-title">
        <a class="title-link" id="under-construction" href="/posts/under-construction.html" title="Read on separate page">
          Under Construction!
        </a>
        <a href="#under-construction" class="robaczek" title="Link to this place on current page">¶</a>
      </h1>
      
        <h3 class="subtitle">The blog is going through a rewrite of its generator code</h3>
      
      <p class="meta">
        Created: <time>&lt;2023-11-26 12:00&gt;</time>
        
          &middot; Updated: <time>&lt;2023-12-06 Wed 15:13&gt;</time>
        
      </p>
    </header>

    <p>
In short:
</p>

<div style="text-align: center">
  <img src="/posts/data/1d/65148e-ae25-4d8e-9e11-3185b0e655a0/under-construction90s-90s.gif" />
</div>

<p>
Longer version: this blog was previously generated with a custom Python-based
generator. I wrote it as an excercise - at the time, I was fascinated with
functional programming, and I used the blog generator to play with functional
features in Python, leveraging mainly <code>funcy</code> library. The code turned out
weird, but it worked, and I used it for years. However, the whole workflow was
optimized for publishing loooong and complex blog posts, and for every post,
setup time was substantial.
</p>

<p>
I realized that I need to eliminate as many barriers to publishing posts as
possible if I ever want to start publishing shorter content more often. I didn't
care for a long time, but recently, finding time to finish those looong and
complex posts became challenging. So, I decided to take a stab at integrating
the generator into my normal workflow. In other words, I decided to rewrite the
whole thing in Emacs Lisp.
</p>

<p>
I researched a bunch of existing solutions, the ones that appeared maintained:
</p>

<ul class="org-ul">
<li><a href="https://github.com/tumashu/org2web">org2web</a></li>
<li><a href="https://orgify.pages.dev/">orgify</a></li>
<li><a href="https://emacs.love/weblorg/">weblorg</a></li>
<li><a href="https://github.com/bastibe/org-static-blog/">org-static-blog</a></li>
</ul>

<p>
But none of them worked for me out of the box. Plus, my previous custom code did
a bunch of smart things that I'm not yet sure how to replicate in Org, and of
course none of the packages provide them.
</p>

<p>
I took inspiration from <code>weblorg</code>, mostly, and in under 100 loc I managed to
write something that works just enough to post this information. It will take
another weekend or two to bring back all the features I want, and then some more
time to convert old posts, but it's going to happen.
</p>

<p>
<b><b>Just</b></b> FYI, if you wondered where the content disappeared to: <b><b>it will be back!</b></b>
</p>
<div id="outline-container-under-construction!_mostly-works" class="outline-2">
<h2 id="under-construction!_mostly-works"><span class="section-number-2">1.</span> Mostly works</h2>
<div class="outline-text-2" id="text-under-construction!_mostly-works">
<ul class="org-ul">
<li>basic templating with <a href="https://github.com/clarete/templatel/">templatel</a></li>
<li>using Org keywords as metadata (<code>#+TITLE:</code>, <code>#+SUBTITLE:</code>, <code>#+DATE:</code>, etc.)</li>
<li>using Org keyword <code>#+STATE</code> to decide whether a post should be rendered</li>
<li>main page with all posts rendered, ordered by date</li>
<li>post pages, one post per page</li>
<li>after-save-hook re-renders edited post</li>
<li>automatically set <code>CUSTOM_ID</code> properties for the headlines, based on title</li>
<li>Docker with OpenRESTY for local development</li>
<li>tame <code>org-attach</code> so that the attached files are found after export</li>
<li>make <code>info:</code> links render as links to web version (worked out of the box)</li>
</ul>
</div>
</div>
<div id="outline-container-under-construction!_to-be-done" class="outline-2">
<h2 id="under-construction!_to-be-done"><span class="section-number-2">2.</span> To be done</h2>
<div class="outline-text-2" id="text-under-construction!_to-be-done">
<ul class="org-ul">
<li>make attached images not wider than main column and activate lightbox on them</li>
<li>add a copy button beside code blocks that will copy the contents of a block
but wrapped in some checks and instructions for users</li>
<li>add a special link type to link to Emacs sources (mirror on GH after export)</li>
<li>insert emacs version in the footer of source blocks</li>
<li>estimate post reading time: 200 and 250 wpm is the average adult reading speed</li>
<li>add <code>--delete</code> to <code>rsync</code> when uploading to the server (after <b>pages</b> work)</li>
<li>maintain a history of changing titles, delete previous versions but redirect
to new ones</li>
<li>various elements CSS fixes (footnotes, blockquotes, nested lists, etc)
<ul class="org-ul">
<li>fix margins and padding in <code>&lt;ol&gt;</code> lists</li>
<li>some things to steal: <a href="http://alhassy.com/repl-driven-development">http://alhassy.com/repl-driven-development</a></li>
</ul></li>
<li>start rendering pages (separately from posts)</li>
<li>avoid re-exporting unchanged posts</li>
<li>tangle code blocks into files on export</li>
<li>handle static files copying (and preprocessing where needed) automatically</li>
<li>update #+UPDATED: keyword on save</li>
<li>add a special link type to link to Emacs sources (mirror on GH after export,
checkout of the repo locally)</li>
<li>configure Nginx to allow URLs without file extensions and enable content
negotiation (as described in <a href="https://www.w3.org/Provider/Style/URI">https://www.w3.org/Provider/Style/URI</a>)
<ul class="org-ul">
<li>since I write posts in Org now exclusively, I want to allow clients to get
the .org file if they want, instead of .html export</li>
</ul></li>
</ul>
</div>
</div>

  </article>

      </div>

      <div class="blog-sidebar">

        <div class="sidebar-module sidebar-module-inset">
          You can now subscribe to an
          <a nofolow="1" href="/statics/feed.xml">RSS feed</a>
          <a nofolow="1" href="/statics/feed.xml"><img src="/statics/feed-icon-14x14.png" style="vertical-align: baseline;"/></a>.
        </div>

        <!-- <div class="sidebar-module sidebar-module-inset" id="posts-module"> -->
        <!-- <h4 style="">Latest posts</h4> -->
        <!-- <ol class="list-unstyled posts-links"></ol> -->
        <!-- </div> -->
        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2023</h4>
          <blockquote>
            One of the most surprising things I've witnessed in my lifetime is
            the rebirth of the concept of heresy.
            <footer>— <cite><a href="http://paulgraham.com/heresy.html">Paul Graham</a></cite></footer>
          </blockquote>
        </div>

        <div class="sidebar-module sidebar-module-inset">
          <h4>About me</h4>
          <p>
            I'm a programmer. I like learning programming languages. I've been
            doing it for more than a decade.
          </p>
          <p>
            Here's roughly <a href="/articles/about.html#history">what I learned</a>
            to date.
          </p>
          <p>
            <a href="/articles/contact.html">Contact me</a>
          </p>
        </div>

        <div class="sidebar-module sidebar-module-inset" id="links-module">
          <h4>Links</h4>

          <ol class="links-list">
            <li><a href="https://www.youtube.com/watch?v=m09RWtt5nd8">Video of my talk on FP</a></li>
            <li><a href="/warsawjs-talk/">Slides</a> and <a href="/warsawjs-talk/code.html">Examples</a> for the talk</li>
          </ol>

          <ol class="links-list">
            <li><a href="http://hashrocket.com/blog/posts/taking-advantage-of-the-polyglot-lifestyle">Polyglot Lifestyle</a></li>
            <li><a href="https://hyperpolyglot.org/">HyperPolyglot - language comparisons</a></li>
            <li><a href="https://programming-idioms.org/">Programming Idioms</a></li>
            <li><a href="https://github.com/kanaka/mal/blob/master/process/guide.md">Make a Lisp</a></li>
            <li><a href="http://rosettacode.org/wiki/Rosetta_Code">Rosetta Code</a></li>
            <li><a href="http://pleac.sourceforge.net/">PLEAC - Programming Language Examples Alike Cookbook</a></li>
            <li><a href="http://learnxinyminutes.com/">Learn X in Y Minutes</a></li>
            <li><a href="http://hyperpolyglot.org/">Hyperpolyglot</a></li>
            <li><a href="http://rigaux.org/language-study/syntax-across-languages/">PL syntaxes comparison</a></li>
            <li><a href="https://github.com/kanaka/mal">Make a Lisp</a></li>
            <li><a href="https://modern-sql.com/use-case/literate-sql">Literate SQL</a></li>
            <li><a href="http://en.literateprograms.org/LiteratePrograms:Welcome">Literate Programs</a></li>
            <li><a href="http://radar.oreilly.com/2013/11/polyglot-programming-what-is-it-and-why-should-you-be-using-it.html">Why Polyglot?</a></li>
          </ol>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2022</h4>
          <blockquote>
            It's amazing what you can talk yourself into liking
            <footer>— <cite>Steve Yegge</cite></footer>
          </blockquote>
        </div>


        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2020</h4>
          <blockquote>
            What can change the nature of a man?
            <footer>— <cite>Ravel Puzzlewell</cite></footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2017</h4>
          <blockquote>
            One foot in the grave, the other in Hell.
            <footer>— <cite>The Nameless One</cite></footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Catch phrase of the Year 2016</h4>
          <blockquote>
            It isn't ideal that...
            <footer>— <cite>many different people</cite></footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2015</h4>
          <blockquote>
            You can't type-check being hit by a lightning, can you?
            <footer>
              — <cite>Joe Armstrong, creator of <a href="https://en.wikipedia.org/wiki/Erlang_(programming_language)">Erlang</a></cite>
            </footer>
          </blockquote>
        </div>

        <div class="quote-of-the-year sidebar-module sidebar-module-inset">
          <h4 style="text-align: center">Quote of the Year 2014</h4>
          <blockquote>
            But you <i>do know</i> that non-programmers are
            people, too?
            <footer>— <cite>Michał Kłujszo</cite></footer>
          </blockquote>
        </div>
      </div> <!-- /.blog-sidebar -->
    </main>
    <footer class="blog-footer">
      <p><a href="#">Back to top</a> / <a href="">More posts</a> </p>
    </footer>

    <script src="/statics/bundle.js?cache_busting_cookie=4239"></script>
  </body>
</html>
